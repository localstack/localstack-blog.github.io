<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet href=/css/vendor/custom.css><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=/main.b93f21975a8c509862bc461126163a533d1083c67ad9fe8621b9b49c72f22af2f868498b9be3305e5c0243d5b194d4e9df7ec3a49e44fa797de7700c870708a0.css integrity="sha512-uT8hl1qMUJhivEYRJhY6Uz0Qg8Z62f6GIbm0nHLyKvL4aEmLm+MwXlwCQ9WxlNTp337DpJ5E+nl953AMhwcIoA==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Test Monitoring for LocalStack Apps - LocalStack</title><meta name=description content="Developing Serverless Applications Locally with LocalStack and Debugging Tests with Thundra Foresight."><link rel=canonical href=/2021-09-16-test-monitoring-for-localstack-apps/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image1.png"><meta name=twitter:title content="Test Monitoring for LocalStack Apps"><meta name=twitter:description content="Developing Serverless Applications Locally with LocalStack and Debugging Tests with Thundra Foresight."><meta name=twitter:site content="@localstack"><meta name=twitter:creator content="@localstack"><meta property="og:title" content="Test Monitoring for LocalStack Apps"><meta property="og:description" content="Developing Serverless Applications Locally with LocalStack and Debugging Tests with Thundra Foresight."><meta property="og:type" content="article"><meta property="og:url" content="/2021-09-16-test-monitoring-for-localstack-apps/"><meta property="og:image" content="/2021-09-16-test-monitoring-for-localstack-apps/image1.png"><meta property="article:published_time" content="2021-09-16T13:10:00+02:00"><meta property="article:modified_time" content="2021-09-16T13:10:00+02:00"><meta property="og:site_name" content="LocalStack"><meta property="article:publisher" content="https://www.facebook.com/"><meta property="article:author" content="https://www.facebook.com/"><meta property="og:locale" content="en_US"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/localstack.cloud\/"},{"@type":"ListItem","position":3,"name":"2021 09 16 Test Monitoring for Localstack Apps","item":"https:\/\/localstack.cloud\/\/2021-09-16-test-monitoring-for-localstack-apps\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#6b7cf5><link rel=manifest href=/site.webmanifest><script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-101988473-1','auto'),ga('send','pageview')</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-QRFTZPWGB7"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-QRFTZPWGB7')</script><script defer src=https://unpkg.com/@tinybirdco/flock.js data-host=https://api.tinybird.co data-token=p.eyJ1IjogIjAwZDRjYzRjLTg4N2UtNGNmZS05YzY4LTJjNzMyNjE5ODdjMCIsICJpZCI6ICI2YzRhMDViNi1iZjVlLTRkY2QtODNlZS1jMmFjYjg5ZjQ1NzAifQ.EPdBzyAb28wUbtZacobblsMi42IwTd7d2amppDfw-jE></script><script type=text/javascript id=hs-script-loader async defer src=//js-eu1.hs-scripts.com/26596507.js></script><script type=text/javascript src=//js-eu1.hsforms.net/forms/embed/v2.js></script><script>function toggleTag(b){const c='tag-'+b;if(c!=='tag-all'){const a=document.getElementsByClassName('tag-all');for(let b=0;b<a.length;b++){const c=a[b];c.classList.add('d-none')}}const d=document.getElementsByClassName(c);for(let a=0;a<d.length;a++){const b=d[a];b.classList.remove('d-none')}const e=document.getElementsByClassName('filterButton');for(let a=0;a<e.length;a++){const b=e[a];b.classList.remove('bg-purple'),b.classList.remove('btn-primary'),b.classList.add('btn-outline-primary')}const f=b+"FilterButton",a=document.getElementById(f);a.classList.add('bg-purple'),a.classList.add('btn-primary'),a.classList.remove('btn-outline-primary')}</script></head><body class="page single"><header></header><section class="section section-sm bg-gradient-dark"><div class="position-absolute w-100 section pb-7 pt-7 d-none d-md-block"><div class=container><div class="row justify-content-center align-items-center"><div class=col-2><img class=w-100 style=transform:scale(2);opacity:.65 src=/images/heroes/blog.svg></div><div class=col-2></div><div class=col-2></div><div class=col-2><img class=w-100 style=transform:rotate(35deg)scale(1.4);opacity:.9 src=/images/heroes/blog.svg></div><div class=col-2><img class=w-100 style=transform:rotate(-45deg)scaleX(-1)scale(1.5);opacity:.75 src=/images/heroes/blog.svg></div></div></div></div><div class="container pb-5 pt-6 pb-md-7 pt-sm-7"><div class="row justify-content-center align-items-center text-white"><h1 class="text-center m-0 pt-lg-5">Test Monitoring for LocalStack Apps</h1></div></div></section><section class="section section-sm mb-6"><div class="container px-lg-8"><div class="row justify-content-center"><div class=col-12><article><div class=blog-header><div class="d-flex align-items-center flex-wrap card-footer-text"><p class=mb-0><img src=/images/common/clock.svg>
9&nbsp;MIN READ&nbsp;&#8212;&nbsp;
posted September 16, 2021 by <a class="stretched-link position-relative">Oguzhan Ozdemir, Solutions Engineer @ Thundra</a></p><p></div></div><p class=lead>Developing Serverless Applications Locally with LocalStack and Debugging Tests with Thundra Foresight. (Guest blog post by Oguzhan Ozdemir, Solutions Engineer @ Thundra)</p><img class="img-simple img-fluid lazyload blur-up" src=/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_20x0_resize_box_2.png data-src=/2021-09-16-test-monitoring-for-localstack-apps/image1.png width=1680 height=1604><p><div class="alert alert-warning d-flex" role=alert><div class="flex-shrink-1 alert-icon"></div><div class=w-100>üì¢ Thundra Inc and its product Foresight have ceased operations and have been acquired by Catchpoint, resulting in significant changes to their products and services. Please note that the tutorial provided in our blog may no longer be applicable or functional with the latest updates. We are keeping this blog post available for informational purposes only.</div></div><br>LocalStack gives developers the freedom to develop their cloud applications locally (even offline) - enabling a highly efficient dev&test loop. It also helps prevent scary cloud bills at the end of every month! LocalStack has an amazing community of users, contributors, and supporters - and generally demonstrates a very strong commitment to supporting open source.</p><p>The community uses LocalStack for many use cases such as developing microservice cloud applications. One of the strongest use cases why developers use LocalStack is ‚Äútesting‚Äù. Since the local testing framework is provided, the need for setting up multiple testing environments on the cloud disappears and distributed microservice applications can easily be developed, tested, and deployed with green tests.</p><p>But, wait! Not everything will go so smoothly all the time. Oh, I wish we were in such a fairy tale where the horses were unicorns with wings, and tests passed in the first run.</p><p>It‚Äôs a fact that tests fail. All the time! Some erroneous tests make developers tear their hair out while trying to find the root cause in the log piles. And sometimes it is not a road blocker but it is definitely a fly in the ointment.</p><p>Today, it‚Äôs such a pain relief to use LocalStack while developing test environments. It saves us from setting up complex cloud environments with its easy-to-use mocked cloud services. On the other hand, there is still a need for debugging failed tests without getting lost within the logs of our complex architectures.</p><p>This is when Thundra comes to the rescue with Foresight for those who use LocalStack on their local development machine or in their Continuous Integration (CI) pipeline. Foresight helps developers understand the root causes of failing & long-running tests easily and quickly. It gives rich insights about the passed, failed, aborted tests of the test runs of the test suites.</p><h4 id=sample-application>Sample application</h4><p>Let‚Äôs talk about how we can get the best out of these two products. For this purpose, we‚Äôve developed a small application. An application that‚Äôll spawn multiple AWS services on your local machine with LocalStack and monitor your distributed architecture and its tests with Thundra Foresight.</p><a href=/2021-09-16-test-monitoring-for-localstack-apps/image8.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_20x0_resize_box_2.png data-srcset="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_900x0_resize_box_2.png 900w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_800x0_resize_box_2.png 800w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_700x0_resize_box_2.png 700w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_600x0_resize_box_2.png 600w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_500x0_resize_box_2.png 500w" width=1999 height=1057><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_900x0_resize_box_2.png 900w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_800x0_resize_box_2.png 800w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_700x0_resize_box_2.png 700w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_600x0_resize_box_2.png 600w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image8_hud935164d597eecb87042439b0337f7ca_186928_500x0_resize_box_2.png 500w" src=/2021-09-16-test-monitoring-for-localstack-apps/image8.png width=1999 height=1057></noscript></figure></a><p>What we‚Äôve planned here is somewhat simple. An AWS Lambda function, let‚Äôs call this Lambda #1, with an HTTP endpoint to take a request then writes to an SQS queue for further processing and then writes the same request into a DynamoDB database for bookkeeping purposes. Then, that SQS queue will pass the incoming message to our processor Lambda, our Lamda #2.</p><p>Once the processing is successful, Lambda #2 will notify an SNS topic, which triggers our archive Lambda, Lambda #3. When Lambda #3 is triggered, it‚Äôll go back to the DynamoDB and update the request‚Äôs record, and set its state. It‚Äôll also write the result of this whole request into a file and put it in an S3 bucket.</p><p>This might seem a lot, but all it does is pass the body of an HTTP request between different services and manipulate it along the way. This project is developed by Thundra‚Äôs Software Engineer <a href=https://twitter.com/tolgatakir>Tolga Takƒ±r</a> and the source code is available in <a href=https://github.com/thundra-io/thundra-demo-localstack-java>our GitHub repository</a>. In there, you‚Äôll find the documentation on how to run this project on your machine.</p><p>After having all the requirements set up on our computer, we can simply run <code>make start</code> to spin up our application with LocalStack. This will take a couple of minutes, but once it‚Äôs completed, we‚Äôll have our API running inside the LocalStack container.</p><p>At this point, we can run the following command to see if our API is up and running.</p><pre><code class=language-bash>$ awslocal apigateway get-rest-apis
{
    &quot;items&quot;: [
        {
            &quot;id&quot;: &quot;&lt;YOUR_APIGATEWAY_ID&gt;&quot;,
            &quot;name&quot;: &quot;local-thundra-demo-localstack&quot;,
            &quot;createdDate&quot;: &quot;2021-09-06T13:54:57+03:00&quot;,
            &quot;version&quot;: &quot;V1&quot;,
            &quot;binaryMediaTypes&quot;: [],
            &quot;apiKeySource&quot;: &quot;HEADER&quot;,
            &quot;endpointConfiguration&quot;: {
                &quot;types&quot;: [
                    &quot;EDGE&quot;
                ]
            },
            &quot;tags&quot;: {},
            &quot;disableExecuteApiEndpoint&quot;: false
        }
    ]
}
</code></pre><p>If this result comes up empty, you might be looking in the wrong region.</p><p>We&rsquo;ve confirmed that our API is up and running. You can also send a GET request to Lambda&rsquo;s endpoint. This might take some time since it‚Äôs a cold start, but eventually, it should return an empty list.</p><pre><code class=language-bash>$ curl http://&lt;YOUR_APIGATEWAY_ID&gt;.execute-api.localhost.localstack.cloud:4566/local/requests

[]%
</code></pre><p>Let‚Äôs see what Thundra Foresight can do now. We can kill the current LocalStack container, we won‚Äôt be needing it for running the tests.</p><h4 id=how-to-integrate-foresight-into-localstack>How to integrate Foresight into LocalStack</h4><p>Thundra Java Agent comes built-in with LocalStack v0.12.16 and later. If you have the latest version of LocalStack, all you need to do is set <code>THUNDRA_APIKEY</code> as an environment variable and you are good to go with application monitoring. To enable Foresight as well, <code>THUNDRA_AGENT_TEST_PROJECT_ID</code> environment variable must be set.</p><p>You can get your API Key and Project ID at https://foresight.thundra.io.</p><p>For this project, you can set them in the <code>Makefile</code>. If that‚Äôs done, let‚Äôs run the tests with <code>make test</code>. After some time, if the demo gods are with us and we don‚Äôt have any problem, we should be able to see the results.</p><pre><code>[INFO]
[INFO] Results:
[INFO]
[ERROR] Failures:
[ERROR]   AppRequestLocalStackTest.testCreateNewRequest:30-&gt;LocalStackTest.assertEventually:90-&gt;lambda$testCreateNewRequest$0:38 [Extracted: requestId, status]
Expecting ArrayList:
  [(&quot;ae1bd554&quot;, &quot;PROCESSING&quot;), (&quot;ae1bd554&quot;, &quot;QUEUED&quot;)]
to contain:
  [(&quot;ae1bd554&quot;, &quot;QUEUED&quot;), (&quot;ae1bd554&quot;, &quot;PROCESSING&quot;), (&quot;ae1bd554&quot;, &quot;FINISHED&quot;)]
but could not find the following element(s):
  [(&quot;ae1bd554&quot;, &quot;FINISHED&quot;)]
[INFO]
[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  02:00 min
[INFO] Finished at: 2021-09-06T21:21:01+03:00
[INFO] ------------------------------------------------------------------------
</code></pre><p>Looks like our test has failed. By looking at the logs, I can tell that we didn‚Äôt get the <code>FINISHED</code> state in our collection. Let‚Äôs check Foresight and then click to our test to see if we can see what went wrong.</p><a href=/2021-09-16-test-monitoring-for-localstack-apps/image3.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_20x0_resize_box_2.png data-srcset="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_900x0_resize_box_2.png 900w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_800x0_resize_box_2.png 800w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_700x0_resize_box_2.png 700w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_600x0_resize_box_2.png 600w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_500x0_resize_box_2.png 500w" width=1469 height=966><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_900x0_resize_box_2.png 900w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_800x0_resize_box_2.png 800w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_700x0_resize_box_2.png 700w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_600x0_resize_box_2.png 600w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image3_hu288b3fe3abc9de69c03a13949354cba3_107408_500x0_resize_box_2.png 500w" src=/2021-09-16-test-monitoring-for-localstack-apps/image3.png width=1469 height=966></noscript></figure></a><p>When you are on the test detail page, you can click the <code>Trace Map</code> button on the top right, it‚Äôll open a window and will automatically redirect you to your invocations trace map. Here, we can see the whole flow, identical to what we‚Äôve designed at the beginning of this post. We will also be able to tell where the error comes from.</p><a href=/2021-09-16-test-monitoring-for-localstack-apps/image9.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_20x0_resize_box_2.png data-srcset="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_900x0_resize_box_2.png 900w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_800x0_resize_box_2.png 800w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_700x0_resize_box_2.png 700w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_600x0_resize_box_2.png 600w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_500x0_resize_box_2.png 500w" width=1000 height=1000><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_900x0_resize_box_2.png 900w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_800x0_resize_box_2.png 800w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_700x0_resize_box_2.png 700w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_600x0_resize_box_2.png 600w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image9_hua609710ae074df46d8e6dede42fdb854_154829_500x0_resize_box_2.png 500w" src=/2021-09-16-test-monitoring-for-localstack-apps/image9.png width=1000 height=1000></noscript></figure></a><p>The red arrow that goes from our Lambda #3 to DynamoDB means there is a problem there. If we click on that, we‚Äôll see a trace chart and summary of this request.</p><a href=/2021-09-16-test-monitoring-for-localstack-apps/image1.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_20x0_resize_box_2.png data-srcset="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_900x0_resize_box_2.png 900w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_800x0_resize_box_2.png 800w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_700x0_resize_box_2.png 700w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_600x0_resize_box_2.png 600w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_500x0_resize_box_2.png 500w" width=1680 height=1604><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_900x0_resize_box_2.png 900w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_800x0_resize_box_2.png 800w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_700x0_resize_box_2.png 700w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_600x0_resize_box_2.png 600w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image1_hu7f1c76287f74c08439e66c0833848c85_236329_500x0_resize_box_2.png 500w" src=/2021-09-16-test-monitoring-for-localstack-apps/image1.png width=1680 height=1604></noscript></figure></a><p>Hmm&mldr; An <code>AmazonDynamoDBException</code> and a message that says everything fails. Let‚Äôs click on that up-arrow and see what‚Äôs the source of this.</p><a href=/2021-09-16-test-monitoring-for-localstack-apps/image4.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_20x0_resize_box_2.png data-srcset="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_900x0_resize_box_2.png 900w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_800x0_resize_box_2.png 800w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_700x0_resize_box_2.png 700w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_600x0_resize_box_2.png 600w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_500x0_resize_box_2.png 500w" width=898 height=428><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_900x0_resize_box_2.png 900w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_800x0_resize_box_2.png 800w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_700x0_resize_box_2.png 700w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_600x0_resize_box_2.png 600w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image4_hub3877a71fe9069107deeed30c1058fb3_55605_500x0_resize_box_2.png 500w" src=/2021-09-16-test-monitoring-for-localstack-apps/image4.png width=898 height=428></noscript></figure></a><p>It looks like our <code>addRequest</code> method has failed when saving the item into our DynamoDB database. Let‚Äôs see our trace map again. If we click the JUnit 5 node on our map, we‚Äôll see the whole trace chart for our test.</p><a href=/2021-09-16-test-monitoring-for-localstack-apps/image2.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_20x0_resize_box_2.png data-srcset="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_900x0_resize_box_2.png 900w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_800x0_resize_box_2.png 800w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_700x0_resize_box_2.png 700w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_600x0_resize_box_2.png 600w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_500x0_resize_box_2.png 500w" width=1999 height=1010><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_900x0_resize_box_2.png 900w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_800x0_resize_box_2.png 800w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_700x0_resize_box_2.png 700w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_600x0_resize_box_2.png 600w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image2_hu9a68d272dc7d644c73bab2f57d2de3fd_274514_500x0_resize_box_2.png 500w" src=/2021-09-16-test-monitoring-for-localstack-apps/image2.png width=1999 height=1010></noscript></figure></a><p>On the right hand side of the screen, we see the original assertion error and it‚Äôs method marked as red on the trace chart. Let‚Äôs click to that second red row.</p><a href=/2021-09-16-test-monitoring-for-localstack-apps/image7.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_20x0_resize_box_2.png data-srcset="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_900x0_resize_box_2.png 900w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_800x0_resize_box_2.png 800w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_700x0_resize_box_2.png 700w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_600x0_resize_box_2.png 600w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_500x0_resize_box_2.png 500w" width=1999 height=970><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_900x0_resize_box_2.png 900w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_800x0_resize_box_2.png 800w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_700x0_resize_box_2.png 700w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_600x0_resize_box_2.png 600w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image7_hue4c3b5114aed8172e9953cee5adf172c_327947_500x0_resize_box_2.png 500w" src=/2021-09-16-test-monitoring-for-localstack-apps/image7.png width=1999 height=970></noscript></figure></a><p>This opened our debugging window again. Now, let‚Äôs zoom in on that and play the execution until the end.</p><a href=/2021-09-16-test-monitoring-for-localstack-apps/image5.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_20x0_resize_box_2.png data-srcset="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_900x0_resize_box_2.png 900w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_800x0_resize_box_2.png 800w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_700x0_resize_box_2.png 700w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_600x0_resize_box_2.png 600w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_500x0_resize_box_2.png 500w" width=1054 height=634><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_900x0_resize_box_2.png 900w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_800x0_resize_box_2.png 800w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_700x0_resize_box_2.png 700w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_600x0_resize_box_2.png 600w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image5_hu1eef8db3291370ef2a35af7cdddca487_241137_500x0_resize_box_2.png 500w" src=/2021-09-16-test-monitoring-for-localstack-apps/image5.png width=1054 height=634></noscript></figure></a><p>We can see that our <code>getResponse</code> list doesn‚Äôt have the <code>FINISHED</code> state as expected.</p><p>Now, we have some idea where our error originated and what variables were present at the time of the execution of our test. We call this <a href=https://foresight.docs.thundra.io/core-concepts/enabling-time-travel-debugging>Time Travel Debugging</a>. With this instrumentation method, Thundra Agent will give you the ability to save your traces and play them line by line to debug your application and your tests.</p><p>Now, let‚Äôs see how we can fix this. But, as you might have guessed, there isn‚Äôt any bug in the code and the error is made up.</p><p><em>Or is it?</em></p><h4 id=chaos-is-the-answer>Chaos is the Answer</h4><p>Well, usually developers write tests to ensure their application doesn‚Äôt break when they develop new features, fix bugs, or change anything in their codebase. Generally, this will give you a good estimate of how robust your application is. But not all errors come from our inability to write bug-free code.</p><p>Let‚Äôs face it. Some of the things we do feel like magic. There are a lot of things that can go wrong between your local environment and your production that we don‚Äôt understand at first sight. Even when you successfully push your code to production, things can still fail your efforts. A network partition, latency in the network where your code runs, or some disk failures&mldr; All of these could cost you a lot and this isn‚Äôt a perfect world. Some of these have already happened to you or might happen in the future. The best you can do is to be prepared for all of these as much as possible.</p><p>Purposefully injecting a bug, an exception, or latency might seem counterintuitive, but it‚Äôs better than the unexpected. This practice of doing a controlled experiment on your distributed system is called <a href=https://apm.docs.thundra.io/monitoring/chaos-engineering-with-thundra>Chaos Engineering</a>. At Thundra, we value the chaos, do our best to be prepared for the unexpected and we want our customers to be the same, if not more. By using Thundra Agent in your project, you‚Äôll have the capability to engineer your own chaos experiment for your applications and your tests.</p><p>So, that‚Äôs what we did here. If you go to the following file, you‚Äôll see that we‚Äôve implemented a class for chaos injection and injected an error to our Lambda #3.</p><a href=/2021-09-16-test-monitoring-for-localstack-apps/image6.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_20x0_resize_box_2.png data-srcset="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_900x0_resize_box_2.png 900w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_800x0_resize_box_2.png 800w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_700x0_resize_box_2.png 700w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_600x0_resize_box_2.png 600w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_500x0_resize_box_2.png 500w" width=916 height=211><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_900x0_resize_box_2.png 900w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_800x0_resize_box_2.png 800w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_700x0_resize_box_2.png 700w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_600x0_resize_box_2.png 600w,https://localstack.cloud/2021-09-16-test-monitoring-for-localstack-apps/image6_hu9b63f7e2dbfa62d09587a0c1e3e9ac13_50205_500x0_resize_box_2.png 500w" src=/2021-09-16-test-monitoring-for-localstack-apps/image6.png width=916 height=211></noscript></figure></a><p>To fix the error, we can simply comment out these lines. Let‚Äôs run the tests again and see our tests become successful.</p><pre><code class=language-bash>[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 102.819 s - in io.thundra.demo.localstack.integration.AppRequestLocalStackTest
[INFO]
[INFO] Results:
[INFO]
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  02:04 min
[INFO] Finished at: 2021-09-07T18:01:22+03:00
[INFO] ------------------------------------------------------------------------
</code></pre><p>In addition to application-level chaos engineering with Thundra, we can also inject errors at the infrastructure level with LocalStack - for example, injecting Kinesis stream errors by configuring <code>KINESIS_ERROR_PROBABILITY=0.8</code>. But let‚Äôs not go into too much detail here - we‚Äôll cover that in a separate blog post!</p><h4 id=optimizations-and-thundra-lambda-server>Optimizations and Thundra Lambda Server</h4><p>When dealing with Lambdas, cold starts and feedback loops are always an issue whether you are on cloud or on your local. Thundra Agent comes with a lot of powerful utilities to minimize this tiresome cycle and helps you develop and debug your code faster and easier.</p><p>When you check the codes for this project, especially the <code>LocalStackTest.java</code> file, you‚Äôd see that we‚Äôre calling <code>make start-embedded</code> before each test. We‚Äôre simply forwarding all the Lambda invocations to the built-in Lambda server inside Thundra Agent. With this configuration, your cold starts and deployment time decreases substantially.</p><p>This will also affect the overall test time. A simple comparison is shown below.</p><pre><code class=language-bash>Test Execution Time (min) -------------
start                              2.53
start-embedded                     1.44
---------------------------------------
</code></pre><p>We hope to cover this feature in more detail in the future.</p><h4 id=summary-and-next-steps>Summary and Next Steps</h4><p>Summing up; LocalStack users can now have a granular view of their tests by plugging in Thundra Foresight with the demonstrated easy steps.</p><p>Foresight brings the power of observability that we have for production workloads into the tests for LocalStack users. If you want to learn more about how the integration works, you can check the documentation here.</p><p><strong>You can <a href="https://start.thundra.io/signup?utm_source=LocalStack&utm_medium=GuestBlog">signup for Thundra</a> and integrate your open source project for &ldquo;free forever and with full functionality&rdquo;</strong>.</p></article></div></div></div></section><section class="section bg-gradient-light"><div class=container><div class="row justify-content-center"><div class="d-flex flex-column gap-4 col-lg-12 text-white"><h2 class="h2 text-center">Stay in the loop</h2><p>We'd love to get in touch with you.
Please subscribe with your email to stay tuned for release notes and product updates.
We promise never to send an excessive amount of emails (we hate spam, too).</p><script>hbspt.forms.create({region:"eu1",portalId:"26596507",formId:"1cc99237-4ce0-4d65-abdf-f87ac2724717"})</script></div></div></div></section><footer class="footer pt-6 bg-gradient-dark"><div class="footer-main pb-5"><div class=container><div class="row justify-content-between"><div class="col-12 col-lg-4"><img style=width:243px src=/images/header-logo-new.svg alt="LocalStack Logo"></div><div class="col-12 col-lg-8 mt-4 mt-lg-0"><div class="row gap-4"><div class=col><ul class="list-unstyled gap-4 d-flex flex-column"><li><a class=footer-text href=https://localstack.cloud>Contact</a></li><li><a class=footer-text href=https://localstack.cloud>Pricing</a></li><li><a class=footer-text href=/>Blog</a></li><li><a class=footer-text href=https://localstack.cloud>Careers</a></li></ul></div><div class=col><ul class="list-unstyled gap-4 d-flex flex-column"><li><a class=footer-text href=https://app.localstack.cloud>App</a></li><li><a class=footer-text href=https://localstack.cloud>Community</a></li><li><a class=footer-text href=https://localstack.cloud>FAQ</a></li></ul></div><div class=col><ul class="list-unstyled gap-4 d-flex flex-column"><li><a class=footer-text href=https://github.com/localstack>GitHub</a></li><li><a class=footer-text href=https://hub.docker.com/u/localstack>DockerHub</a></li><li><a class=footer-text href=https://docs.localstack.cloud>Docs</a></li></ul></div><div class=col><ul class="list-unstyled gap-4 d-flex flex-column"><li class=footer-text>Follow us</li><li class="d-flex gap-3"><a class=footer-text href=https://twitter.com/localstack><span><svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M25 13.25c0 6.9036-5.5964 12.5-12.5 12.5C5.59644 25.75.0 20.1536.0 13.25.0 6.34644 5.59644.75 12.5.75 19.4036.75 25 6.34644 25 13.25zm-6.56-3.0468C19.0443 10.1315 19.6205 9.97084 20.1562 9.73331 19.7558 10.3325 19.2493 10.8586 18.6651 11.2797 18.6709 11.4076 18.6738 11.5366 18.6738 11.6661c0 3.9487-3.0055 8.5014-8.5012 8.5014C8.48534 20.1675 6.91443 19.6731 5.59285 18.825 5.82615 18.8528 6.06457 18.8669 6.30522 18.8669 7.70545 18.8669 8.9936 18.3894 10.0164 17.5879 8.70861 17.5636 7.6054 16.6997 7.22527 15.5129 7.40754 15.5477 7.59449 15.5662 7.78745 15.5662 8.05952 15.5662 8.32401 15.5299 8.57447 15.4612c-1.36658-.2743-2.39692-1.4817-2.39692-2.9294C6.17755 12.5193 6.17755 12.5066 6.17777 12.4939 6.58041 12.7183 7.04144 12.8526 7.53098 12.868 6.7297 12.3323 6.20183 11.4174 6.20183 10.3811c0-.547520000000001.14751-1.06113.40465-1.50232C8.08024 10.687 10.282 11.8764 12.7651 12.001 12.7139 11.7822 12.6874 11.5542 12.6874 11.32c0-1.64975 1.338-2.98781 2.9878-2.98781.8599.0 1.6364.36276 2.1815.94322C18.5369 9.14149 19.1767 8.89304 19.754 8.55056 19.5305 9.24867 19.057 9.83358 18.44 10.2032z" fill="#fff"/></svg></span></a><a class=footer-text href=https://www.linkedin.com/company/localstack-cloud><span><svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13 26c7.1797.0 13-5.8203 13-13S20.1797.0 13 0 0 5.8203.0 13 5.8203 26 13 26zM9.35126 10.5024C9.97963 10.5024 10.489 9.993 10.489 9.36463S9.97963 8.22687 9.35126 8.22687 8.2135 8.73626 8.2135 9.36463s.50939 1.13777 1.13776 1.13777zm2.21194.8622v6.3122h1.9599V14.5553C13.5231 13.7316 13.6781 12.9339 14.6993 12.9339c1.0073.0 1.0198.941700000000001 1.0198 1.6734v3.0701H17.68V14.2157C17.68 12.5153 17.3139 11.2086 15.3265 11.2086c-.9542.0-1.5938.5236-1.8554 1.0192H13.4446V11.3646H11.5632zm-3.19382.0H10.3324v6.3122H8.36938V11.3646z" fill="#fff"/></svg></span></a></li></ul></div></div></div></div></div></div><div class=footer-bottom><div class="container mb-2"><hr><div class="row pt-4"><div class=col style=color:#fff;opacity:.5>Copyright &copy; LocalStack</div><div class="col text-end"><ul class=list-inline></ul></div></div></div></div></footer><script src=/js/bootstrap.min.51b4083a09e54138d5bbe9c42a5f5f71af6e60a417f276d5620cbde3b15eb1a07c9ea17a889bc58074adf9b19641039a77521d3131f039300d2fe29ffa532aa8.js integrity="sha512-UbQIOgnlQTjVu+nEKl9fca9uYKQX8nbVYgy947FesaB8nqF6iJvFgHSt+bGWQQOad1IdMTHwOTANL+Kf+lMqqA==" crossorigin=anonymous defer></script><script src=/js/highlight.min.8cdbefd08ec63ef25f4b2510ae50c13b3d9ed43e25a15ddb55f14c33130e68cf8be3131ccf2d087c49f5f21fe88c2f0e2715a21f936047d0d0b85dc48cb864b9.js integrity="sha512-jNvv0I7GPvJfSyUQrlDBOz2e1D4loV3bVfFMMxMOaM+L4xMczy0IfEn18h/ojC8OJxWiH5NgR9DQuF3EjLhkuQ==" crossorigin=anonymous defer></script><script src=/main.min.8933efb6bcdc37606a11f732d52c6f65d7fc1d082b89d56516f6a1bfb528ee7c40c3430bb80214cdd129ec7d69d4cadd74e693da54a9ba6f08c44771204d4468.js integrity="sha512-iTPvtrzcN2BqEfcy1SxvZdf8HQgridVlFvahv7Uo7nxAw0MLuAIUzdEp7H1p1MrddOaT2lSpum8IxEdxIE1EaA==" crossorigin=anonymous defer></script><script src=/index.min.28297aad85d5f5902201eb4ef84e7012a37d4a34824e2256df80cd91e547bf155df22029e5596951d6f2692dd1fee54c76721b407e5ac526bd33bedc636a87e5.js integrity="sha512-KCl6rYXV9ZAiAetO+E5wEqN9SjSCTiJW34DNkeVHvxVd8iAp5VlpUdbyaS3R/uVMdnIbQH5axSa9M77cY2qH5Q==" crossorigin=anonymous defer></script></body></html>